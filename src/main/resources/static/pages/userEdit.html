<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>welcome to nurse hoursing</title>

    <link rel="stylesheet" href="./layui/css/layui.css">
    <link rel="stylesheet" href="./css/userList.css">
    <script type="text/javascript" src="/js/jquery-3.5.1.js"></script>
    <script type="text/javascript" src="/js/angular.min.js"></script>
    <script src="../layui/layui.js"></script>
</head>

<body>
<div>
    <div class="my-top-bar">
        <ul class="layui-nav">
            <li class="layui-nav-item">
                <a href="">controller<span class="layui-badge">9</span></a>
            </li>
            <li class="layui-nav-item">
                <a href=""><span th:text="${authorities}"></span><span class="layui-badge-dot"></span></a>
            </li>
            <li class="layui-nav-item">
                <a href=""><img src="//t.cn/RCzsdCq" class="layui-nav-img"><span
                        th:text="${users.getUserName()}"></span></a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;">edit info</a></dd>
                    <dd><a href="/logout">Quit</a></dd>
                </dl>
            </li>

            <li class="layui-nav-item">
                <a href="/pay"><span>Pay</span></a>
            </li>

        </ul>
    </div>

    <div class="userList">
        <div class="my-left-bar">
            <ul class="layui-nav layui-nav-tree layui-bg-cyan layui-inline my-layui-nav-tree" lay-filter="demo">

                <span th:if="${#strings.contains(userDetails.getAuthorities(),'ROLE_Admin')}">
                    <li class="layui-nav-item layui-nav-itemed">
                        <a href="javascript:;">User Management</a>
                        <dl class="layui-nav-child">
                            <dd><a href="javascript:;">User</a></dd>
                            <dd><a href="javascript:;">Role</a></dd>
                            <dd><a href="http://localhost:8080/selectpermission">permission</a></dd>
                        </dl>
                    </li>
                </span>

                <li class="layui-nav-item">
                    <a href="javascript:;">Nurseing House</a>
                    <dl class="layui-nav-child">
                        <dd><a href="">Recommended</a></dd>
                        <dd><a href="">Preview</a></dd>
                    </dl>
                </li>

                <span th:if="${#strings.contains(authorities,'ROLE_VIP')}">
                <li class="layui-nav-item">
                    <a href="javascript:;">Make an appointmen</a>
                    <dl class="layui-nav-child">
                        <dd><a href="">Dentist</a></dd>
                        <dd><a href="">Yoga class</a></dd>
                    </dl>
                </li>
                </span>

                <li class="layui-nav-item"><a href="">google</a></li>
                <li class="layui-nav-item"><a href="">Youtube</a></li>
            </ul>
        </div>


        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">

            <legend id="userEdit">User Edit</legend>
            <br>
            <form class="layui-form" action="/updateUser" lay-filter="example">
                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">UserName</label>
                        <div class="layui-input-inline">
                            <input type="text" id="username" name="username" lay-verify="required"
                                   placeholder=""
                                   autocomplete="off" class="layui-input" th:value="${users.getUserName()}">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">Password</label>
                        <div class="layui-input-inline">
                            <input type="password" name="password" lay-verify="required" placeholder=""
                                   autocomplete="off" class="layui-input" th:value="${users.getPassword()}" readonly="true" style="background:#CCCCCC">
                        </div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">firstName</label>
                        <div class="layui-input-inline">
                            <input type="text" id="firstName" name="firstName" lay-verify="required"
                                   placeholder=""
                                   autocomplete="off" class="layui-input" th:value="${users.getFirstName()}">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">lastName</label>
                        <div class="layui-input-inline">
                            <input type="text" name="lastName" lay-verify="required" placeholder=""
                                   autocomplete="off" class="layui-input" th:value="${users.getLastName()}">
                        </div>
                    </div>
                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">Email</label>
                        <div class="layui-input-inline">
                            <input type="text" name="email" lay-verify="required" placeholder=""
                                   autocomplete="off" class="layui-input" th:value="${users.getEmail()}">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">Birthday</label>
                        <div class="layui-input-inline">
                            <input type="text" name="birthday" lay-verify="required" placeholder=""
                                   autocomplete="off" class="layui-input"
                                   th:value="${#strings.substring(users.getBirthday(),0,10)}" readonly="true" style="background:#CCCCCC">
                        </div>
                    </div>


                </div>

                <div class="layui-form-item">
                    <div class="layui-inline">
                        <label class="layui-form-label">Gender</label>
                        <div class="layui-input-inline">
                            <input type="text" name="gender" lay-verify="required" placeholder=""
                                   autocomplete="off" class="layui-input" th:value="${users.getGender()}" readonly="true" style="background:#CCCCCC">
                        </div>
                    </div>

                    <div class="layui-inline">
                        <label class="layui-form-label">user Type</label>
                        <div class="layui-input-inline">
                            <input type="text" name="userType" lay-verify="required" placeholder=""
                                   autocomplete="off" class="layui-input" th:value="${users.getUserType()}" readonly="true" style="background:#CCCCCC">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <div class="layui-inline">
                            <label class="layui-form-label">Check IN</label>
                            <div class="layui-input-block">
                                <input type="text" name="checkInDate" id="checkInDate" autocomplete="off" class="layui-input"
                                       th:value="${#dates.format(users.getCheckinTime(), 'yyyy-MM-dd')}">
                            </div>
                        </div>
                        <div class="layui-inline">
                            <label class="layui-form-label">Check OUT</label>
                            <div class="layui-input-block">
                                <input type="text" name="checkOutDate" id="checkOutDate" autocomplete="off" class="layui-input"
                                       th:value="${#dates.format(users.getCheckoutTime(), 'yyyy-MM-dd')}">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="layui-form-item">
                    <button class="layui-btn" lay-submit="" lay-filter="demo2">Submit</button>
                </div>

            </form>

        </fieldset>

    </div>
</div>


<script>


    layui.use(['form', 'layedit', 'laydate'], function () {
        var form = layui.form
            , layer = layui.layer
            , layedit = layui.layedit
            , laydate = layui.laydate;

        laydate.render({
            elem: '#date'
            ,lang: 'en'
        });
        laydate.render({
            elem: '#checkInDate'
            ,lang: 'en'
        });
        laydate.render({
            elem: '#checkOutDate'
            ,lang: 'en'
        });

        var editIndex = layedit.build('LAY_demo_editor');

        //自定义验证规则
        form.verify({
            title: function (value) {
                if (value.length < 5) {
                    return '标题至少得5个字符啊';
                }
            }
            , pass: [
                /^[\S]{6,12}$/
                , '密码必须6到12位，且不能出现空格'
            ]
            , content: function (value) {
                layedit.sync(editIndex);
            }
        });

        //监听指定开关
        form.on('switch(switchTest)', function (data) {
            layer.msg('开关checked：' + (this.checked ? 'true' : 'false'), {
                offset: '6px'
            });
            layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
        });

        //监听提交
        form.on('submit(demo1)', function (data) {
            layer.alert(JSON.stringify(data.field), {
                title: '最终的提交信息'
            })
            return false;
        });


        layui.$('#userEdit').on('click',
            function () {
                form.val('example', {
                        "username": "c" // "name": "value"
                        , "password": "123456"
                        , "interest": 1
                        , "like[write]": true //复选框选中状态
                        , "close": true //开关状态
                        , "sex": "女"
                        , "desc": "d"
                        , "email": "ddddd"
                    }
                );
            });


        //表单取值
        /* layui.$('#userEdit').on('click', function () {
             var data = form.val('example');
             alert(JSON.stringify(data));
         });*/

        // $('#userEdit').click();

    });


</script>

</body>

</html>